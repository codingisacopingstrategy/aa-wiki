{% extends "aawiki/base_wiki.html" %}

{% load aawikitags %}

{% block title %}{{ block.super }} | {{ page.name }}{% endblock %}

{% block extrahead %}
<script src="{{ STATIC_URL }}lib/jquery.slideToggleMinHeight.min.js"></script>
<script src="{{ STATIC_URL }}lib/shortcut.js"></script>   

<script src="{{ STATIC_URL }}aawiki/js/jquery.sort_by_zindex.js"></script>   
<script src="{{ STATIC_URL }}aawiki/js/jquery.caret.js"></script>   
<script src="{{ STATIC_URL }}aawiki/js/jquery.aalayers.js"></script>   
<script src="{{ STATIC_URL }}aawiki/js/jquery.datetimecode.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/jquery.timeline.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/jquery.voidplayer.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/jquery.ui.autoscrollable.js"></script>

<script src="{{ STATIC_URL }}aawiki/js/jquery.ffind.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/aa.view.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/aa.browser.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/embed.js"></script>
<script src="{{ STATIC_URL }}lib/iscroll/src/iscroll.js"></script>
{% endblock %}


{% block body %}
<div id="page-history" class="ui-layout-center">
<h1>History</h1>

    <form action='{{ page.get_diff_url }}' method="get" accept-charset="utf-8">
        <p><input type="submit" name="submit" value="Compare selected revisions" id="submit" /></p>

        <dl id="commits">
            
            {% for commit in page.iter_commits %}
            
                {% ifchanged commit.committed_date|epock2datetime|date:"F" %}
                
                    {% if not forloop.first %}
                        </ul>
                    </dd>
                    {% endif %}
                    
                    <dt>{{ commit.committed_date|epock2datetime|date:"jS o\f F" }}</dt>
                    <dd>
                        <ul>
                {% endifchanged %}

                            <li>
                                <input type="radio" name="c1" value="{{ commit.hexsha }}" />
                                <input type="radio" name="c2" value="{{ commit.hexsha }}" />
                                {{ commit.committed_date|epock2datetime|date:'H:i' }} by {{ commit.author }} <a href="{{ page.get_absolute_url }}?rev={{ commit.hexsha }}">{{ commit.message }}</a>
                                <!--<dl class="commit">-->
                                    <!--<dt>Commit message</dt>-->
                                    <!--<dd class="commit-message"><a href="{{ page.get_absolute_url }}?rev={{ commit.hexsha }}">{{ commit.message }}</a></dd>-->
                                    <!--<dt>Author</dt>-->
                                    <!--<dd class="commit-author">by {{ commit.author }}</dd>-->
                                    <!--[><dt>Stats</dt><]-->
                                    <!--[> <dt>Technical Specifications</dt> <]-->
                                    <!--[> <dd class="commit-details"><a href='#'>view details</a></dd> <]-->
                                <!--</dl>-->
                            </li>
                            
                {% if forloop.last %}
                        </ul>
                    </dd>
                {% endif %}
                
            {% endfor %}
            
        </dl>
        <p><input type="submit" name="submit" value="Compare selected revisions" id="submit" /></p>
    </form>
</div>
{% endblock %}


{% block postbody %}
<nav id="sidebar" class="ui-layout-west"> 
    <div id="login">
        {% if user.is_authenticated %}
            <a title="Logout" href="{% url aa-logout %}">Logout</a>
        {% else %}
            <a title="Login" href="{% url aa-login %}">Login</a>
        {% endif %}
    </div>
    <div>
    <!--<h1 class="logo">-->
        <!--[><a title="Back to main page" href="{% url aa-index %}"><]-->
            <!--[><span>O</span><span>r</span><span>a</span><span>l</span><span>S</span><span>i</span><span>t</span><span>e</span><]-->
        <!--[></a><]-->
        <!--<a title="Back to main page" href="{% url aa-index %}">-->
            <!--Oralsite-->
        <!--</a>-->
    <!--</h1>-->
    <!--<p><a title="About Oral Site" href="{% url aa-page-detail 'Oral_Site' %}">About</a></p>-->
    <!--<hr>-->
        {% if page %}
            {% if user.is_authenticated %}
                <ul id="toolbar">
                    <li><a id="view" title="View the page" href="{{ page.get_absolute_url }}">View</a></li>
                    <li><a id="edit" title="Edit the full page" href="{{ page.get_edit_url }}">Edit</a></li>
                </ul>
            {% endif %}
        {% endif %}

        <header>
            <hgroup>
                {% if meta.title %}
                    <h1>{{ meta.title|first }}</h1>
                {% else %}
                    <h1>{{ page.name }}</h1>
                {% endif %}
                {% if meta.subtitle %}
                    <h2>{{ meta.subtitle|first }}</h2>
                {% endif %}
            </hgroup>

            {% if meta.ispartof %}
            <p>This page is part of the publication{{ meta.ispartof|pluralize }} {{ meta.ispartof|join:"," }}.</p>
            {% endif %}
        </header>
    </div>

    <div id="tab-this">
        <ul id="aa-tabs">
            <li><a title="Help" href="#tab-help">Help</a></li>
        </ul>

        <div id="tab-help" class="aa-tab">
            <div id="help">
            {% include "aawiki/partials/playmode_classes_help.html" %}
            {% include "aawiki/partials/metadata_help.html" %}
            {% include "aawiki/partials/timecode_help.html" %}
            {% include "aawiki/partials/filters_help.html" %}
            {% include "aawiki/partials/markdown_help.html" %}
            </div>
        </div>
    </div>
</nav>
{% endblock %}
